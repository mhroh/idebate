# 📊 배포 후 모니터링 체크리스트

## 🕐 시간별 체크리스트

### ✅ 배포 직후 (0시간)

- [ ] 앱 URL 접속 확인
- [ ] 기본 기능 테스트
  - [ ] 대화명 입력
  - [ ] 메시지 전송
  - [ ] AI 응답 수신
  - [ ] 평가 받기 버튼
- [ ] Secrets 설정 확인 (로그에 에러 없음)
- [ ] Google Sheets 연동 확인 (대화 내역 저장됨)

**예상 시간:** 5분

---

### ✅ 1시간 후

- [ ] Streamlit Analytics 확인
  - 접속자 수: ___명
  - 에러 발생: ___건
- [ ] Logs 확인
  - INFO 로그 정상
  - ERROR 로그 없음 또는 < 5%
- [ ] 메모리 사용량 확인 (< 800MB)

**기록:**
```
시간: ___
접속자: ___명
에러: ___건
메모리: ___MB
상태: ✅ 정상 / ⚠️ 주의 / 🔴 문제
```

---

### ✅ 3시간 후

- [ ] 학생 실제 사용 시작 (5-10명)
- [ ] 동시 접속 테스트
- [ ] 응답 속도 확인 (< 5초)
- [ ] Google Sheets Rate Limit 에러 발생 여부

**기록:**
```
시간: ___
동시 접속: ___명
평균 응답: ___초
Rate Limit 에러: ___건 (자동 복구: ___건)
상태: ✅ 정상 / ⚠️ 주의 / 🔴 문제
```

---

### ✅ 12시간 후 (다음 날 아침)

- [ ] 야간 사용 통계 확인
- [ ] 누적 에러율 계산: ___% (< 5% 목표)
- [ ] 토큰 사용량 확인
  - 프롬프트 캐싱 작동 확인
  - 비용 예상: $___
- [ ] 학생 피드백 수집

**기록:**
```
총 세션: ___개
총 메시지: ___개
총 토큰: ___개
캐싱 절감: ___% (목표: 80%+)
학생 만족도: ___/10
상태: ✅ 정상 / ⚠️ 주의 / 🔴 문제
```

---

### ✅ 24시간 후

- [ ] 24시간 종합 평가
  - 최대 동시 접속: ___명 (목표: 20명)
  - 평균 에러율: ___% (목표: < 5%)
  - 평균 응답 시간: ___초 (목표: < 5초)
  - 메모리 피크: ___MB (목표: < 900MB)

**종합 판단:**

| 지표 | 목표 | 실제 | 통과 |
|------|------|------|------|
| 동시 접속 | 20명+ | ___명 | ⬜ |
| 에러율 | < 5% | ___% | ⬜ |
| 응답 시간 | < 5초 | ___초 | ⬜ |
| 메모리 | < 900MB | ___MB | ⬜ |

**결론:**
- ✅ **모든 지표 통과 → PR 승인 진행**
- ⚠️ 일부 지표 미달 → 48시간 더 모니터링
- 🔴 심각한 문제 → 롤백 고려

---

### ✅ 48시간 후 (최종 판단)

- [ ] 48시간 종합 리포트
- [ ] 문제 패턴 분석
- [ ] 최종 의사결정

**의사결정:**

```
□ PR 승인 → main 머지
  이유: _______________________

□ 추가 모니터링 필요
  기간: ___일
  이유: _______________________

□ 롤백 필요
  이유: _______________________
```

---

## 🚨 긴급 상황 대응

### Case 1: 메모리 초과 (> 1GB)

**증상:**
- 앱 크래시
- "Memory limit exceeded" 에러

**대응:**
1. 즉시 `MAX_CONVERSATION_LENGTH` 50 → 30으로 조정
2. 또는 Railway.app으로 이전

### Case 2: Rate Limit 과다 (> 10회/시간)

**증상:**
- Google Sheets 쓰기 실패 반복
- 재시도 후에도 실패

**대응:**
1. Google Sheets 캐싱 시간 5분 → 10분 증가
2. 학생 수 제한 (MAX_CONCURRENT_USERS 25 → 20)

### Case 3: Claude API 에러 (> 10%)

**증상:**
- AI 응답 실패 반복
- "API error" 빈번

**대응:**
1. API 키 확인
2. 크레딧 잔액 확인
3. 모델을 Haiku로 변경 고려

---

## 📈 성공 사례 기준

다음 모든 조건 충족 시 **성공**:

1. ✅ 24시간 동안 20명 이상 동시 사용
2. ✅ 에러율 5% 미만
3. ✅ 평균 응답 시간 5초 미만
4. ✅ 메모리 안정 (크래시 없음)
5. ✅ 학생 불만 없음

→ **PR 승인 및 main 머지 진행!**

---

## 📝 기록 템플릿

### 일일 리포트

```markdown
## 2024-XX-XX 모니터링 리포트

**요약:**
- 접속: ___명
- 에러: ___건
- 상태: ✅/⚠️/🔴

**상세:**
- 최대 동시 접속: ___명
- 평균 응답: ___초
- 토큰 사용: ___개
- 주요 이슈: _______

**조치사항:**
- _______________________

**다음 단계:**
- _______________________
```

---

## 🎯 최종 목표

**24-48시간 안정 운영 확인 → PR 승인 → main 머지 → 완료!**
