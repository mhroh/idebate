# 🎯 iDebate 추가 기능

## 구현 완료 ✅

### 1. **선생님용 관리자 대시보드** (`/admin`)

#### 실시간 통계
- 🟢 현재 대화 중인 학생 수
- 📊 오늘 총 세션 수
- 👥 총 학생 수
- 💬 오늘 총 메시지 수
- 🪙 오늘 토큰 사용량

#### 실시간 모니터링
- 현재 활성 세션 목록
- 학생별 토큰 사용량
- 최근 활동 학생 (최근 10명)
- 자동 갱신 (5초마다)

#### 학생 검색
- 학생 이름으로 전체 대화 내역 조회
- 세션별 상세 내용 확인

---

### 2. **대화 내역 조회** (`/admin/history`)

#### 세션 목록
- 학생별 모든 대화 세션
- 세션 시작/종료 시간
- 총 소요 시간
- 토큰 사용량
- 진행 중 세션 표시

#### 대화 상세
- 전체 대화 내용 타임라인
- 메시지별 토큰 사용량
- AI 생성 종합 평가 및 평어
- 타임스탬프

---

### 3. **자동 평가 시스템** (API)

#### 평가 생성
- 대화 종료 시 자동 평가 트리거
- AI가 대화 분석하여 종합 평가 생성
- 평어 자동 생성
- Supabase + Google Sheets 동시 저장

---

## 사용 방법

### 관리자 페이지 접속
```
https://your-domain.vercel.app/admin
```

### 학생 검색
1. 관리자 페이지에서 학생 이름 입력
2. "검색" 버튼 클릭
3. 전체 대화 내역 확인

### 평가 생성 (자동)
- 학생이 "대화 종료" 버튼 클릭 시 자동 실행
- 또는 API 직접 호출:
```javascript
POST /api/evaluate
{ "sessionId": "session-uuid" }
```

---

## 향후 추가 가능 기능 💡

### Phase 2 (1-2주)

#### 1. **토큰 사용량 제한**
- 학생별 일일 토큰 제한 설정
- 초과 시 경고 메시지
- 관리자가 제한 조정 가능

```typescript
// 예시 구현
const DAILY_TOKEN_LIMIT = 10000

if (studentTodayTokens > DAILY_TOKEN_LIMIT) {
  return { error: "오늘 사용 가능한 토큰을 초과했습니다." }
}
```

#### 2. **클래스/반별 관리**
- 반별 학생 그룹화
- 반별 통계 조회
- 반별 프롬프트 설정

#### 3. **대시보드 그래프**
- 일별/주별/월별 사용 통계
- 시간대별 접속 분포
- 학생별 참여도 차트

---

### Phase 3 (1개월)

#### 4. **토론 주제 관리**
- 선생님이 주제 등록
- 주제별 프롬프트 자동 전환
- 주제별 통계

#### 5. **학생 포트폴리오**
- 학생별 성장 기록
- 평가 히스토리 그래프
- PDF 리포트 생성

#### 6. **알림 시스템**
- 이메일 알림 (주간 리포트)
- 부적절한 내용 감지 시 알림
- 시스템 장애 알림

---

### Phase 4 (장기)

#### 7. **모바일 앱**
- React Native 앱
- iOS/Android 지원
- 푸시 알림

#### 8. **음성 대화**
- 음성 입력 지원
- TTS (Text-to-Speech)
- 발음 평가

#### 9. **멀티미디어**
- 이미지 업로드 지원
- PDF 문서 분석
- 비디오 자료 활용

---

## 즉시 구현 가능 기능 (30분 이내)

### A. 대화 종료 버튼 추가 (학생 페이지)

현재: 헤더의 "종료" 버튼만 있음
개선: 채팅 하단에 "평가 받기" 버튼 추가

```typescript
// app/page.tsx에 추가
<button onClick={endAndEvaluate}>
  📝 대화 종료 및 평가 받기
</button>
```

### B. 다크 모드

```typescript
// TailwindCSS 다크 모드 활성화
// tailwind.config.js
darkMode: 'class'
```

### C. 대화 내보내기 (TXT/PDF)

```typescript
const exportChat = () => {
  const text = messages.map(m =>
    `[${m.role}] ${m.content}`
  ).join('\n\n')

  const blob = new Blob([text], { type: 'text/plain' })
  downloadBlob(blob, 'chat.txt')
}
```

---

## 비용 최적화 제안

### 1. **Prompt 최적화**
- 시스템 프롬프트 간소화 (토큰 절약)
- 대화 내역 요약 (긴 대화 시)

### 2. **스마트 캐싱**
- 자주 사용하는 응답 캐싱
- Redis 활용

### 3. **배치 처리**
- 평가는 야간에 일괄 처리
- 실시간 대화에 집중

---

## 구현 우선순위 추천

### 지금 바로 (필수)
1. ✅ 관리자 대시보드
2. ✅ 대화 내역 조회
3. ✅ 자동 평가

### 다음 주 (중요)
4. 토큰 제한 기능
5. 대화 종료 버튼 개선
6. 클래스별 관리

### 한 달 내 (유용)
7. 통계 그래프
8. 주제 관리
9. 학생 포트폴리오

---

어떤 기능을 먼저 추가하시겠습니까?
